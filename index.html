<!DOCTYPE html><html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Fire Protection System Design</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f4f4f4;
      padding: 20px;
    }
    h2 {
      background-color: #ff5733;
      color: white;
      padding: 10px;
      border-radius: 5px;
    }
    label {
      display: block;
      margin-top: 10px;
      font-weight: bold;
    }
    input, select {
      padding: 5px;
      width: 200px;
    }
    small {
      display: block;
      font-weight: normal;
      color: #666;
      font-size: 12px;
      margin-top: 2px;
    }
    button {
      margin-top: 15px;
      padding: 10px 20px;
      background-color: #28a745;
      color: white;
      border: none;
      border-radius: 5px;
      font-size: 14px;
      cursor: pointer;
      margin-right: 10px;
    }
    .results {
      margin-top: 20px;
      background-color: #fff;
      padding: 15px;
      border-radius: 5px;
      box-shadow: 0 0 5px rgba(0,0,0,0.1);
    }
    .results p {
      margin: 5px 0;
    }
    .note {
      background: #fff3cd;
      padding: 10px;
      border-left: 5px solid #ffc107;
      margin-top: 20px;
      font-size: 14px;
    }
    #chartContainer {
      margin-top: 30px;
    }
  </style>
</head>
<body>
  <h2>Fire Protection System Check Sheet</h2><label>Hazard Class: <select id="hazardClass"> <option value="0.1">Light Hazard (0.10 gpm/sq.ft)</option> <option value="0.15">Ordinary Hazard Group 1 (0.15 gpm/sq.ft)</option> <option value="0.20" selected>Ordinary Hazard Group 2 (0.20 gpm/sq.ft)</option> <option value="0.3">Extra Hazard Group 1 (0.30 gpm/sq.ft)</option> </select> </label>

<label>Area of Sprinkler Operation (Ao) [sq.ft]: <input type="number" id="area" value="1500"> </label>

<label>Overage Factor: <input type="number" id="overage" value="1" step="0.1" min="1"> </label>

<label>Coverage Area per Sprinkler (As) [sq.ft]: <input type="number" id="coverage" value="129.2" min="10" required> </label>

<label>Spacing Between Sprinklers (S) [m]: <input type="number" id="spacingS_m" value="2.99" min="0.3" step="0.1"> </label>

<label>Spacing Between Branch Lines (L) [m]: <input type="number" id="spacingL_m" value="3.99" min="0.3" step="0.1"> </label>

<label>Sprinkler Head Type (UL/FM): <select id="sprinklerType"> <option value="5.6" selected>Pendent K5.6 - Standard (UL/FM)</option> <option value="8.0">Upright K8.0 - Storage (FM)</option> <option value="11.2">ESFR K11.2 - Rack System (FM)</option> <option value="14.0">K14.0 - High Challenge Area (FM)</option> </select> </label>

<button onclick="calculate()">Calculate</button> <button onclick="exportPDF()">Export PDF</button>

  <div class="results" id="results"></div>
  <div id="chartContainer">
    <canvas id="pumpChart" width="600" height="300"></canvas>
    <div id="pumpSuggestion" style="margin-top:15px; font-weight:bold; color:#003366"></div>
  </div>  <div class="note">
    <strong>‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢:</strong><br>
    ‡πÇ‡∏õ‡∏£‡πÅ‡∏Å‡∏£‡∏°‡∏ô‡∏µ‡πâ‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏û‡∏µ‡∏¢‡∏á‡∏™‡πà‡∏ß‡∏ô‡∏´‡∏ô‡∏∂‡πà‡∏á‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏ä‡πà‡∏ß‡∏¢‡∏û‡∏¥‡∏à‡∏≤‡∏£‡∏ì‡∏≤‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÅ‡∏•‡∏∞‡∏≠‡∏≠‡∏Å‡πÅ‡∏ö‡∏ö‡πÄ‡∏ö‡∏∑‡πâ‡∏≠‡∏á‡∏ï‡πâ‡∏ô‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô<br>
    * ‡∏ï‡πâ‡∏≠‡∏á‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÇ‡∏î‡∏¢ ‡∏ß‡∏¥‡∏®‡∏ß‡∏Å‡∏£‡∏ú‡∏π‡πâ‡∏≠‡∏≠‡∏Å‡πÅ‡∏ö‡∏ö ‡∏Å‡πà‡∏≠‡∏ô‡∏ô‡∏≥‡πÑ‡∏õ‡πÉ‡∏ä‡πâ<br><br>
    üîß ‡∏Ñ‡πà‡∏≤ Head Loss ‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ = 10 psi ‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡πà‡∏≤‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ‡∏ó‡∏µ‡πà‡∏≠‡πâ‡∏≤‡∏á‡∏≠‡∏¥‡∏á‡∏à‡∏≤‡∏Å‡∏Å‡∏≤‡∏£‡∏™‡∏π‡∏ç‡πÄ‡∏™‡∏µ‡∏¢‡πÅ‡∏£‡∏á‡∏î‡∏±‡∏ô‡∏£‡∏ß‡∏° (‡∏£‡∏ß‡∏° friction loss ‡πÉ‡∏ô‡∏ó‡πà‡∏≠, fitting, ‡∏ß‡∏≤‡∏•‡πå‡∏ß, ‡πÅ‡∏•‡∏∞‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏π‡∏á)<br>
    ‡∏ï‡∏≤‡∏°‡πÅ‡∏ô‡∏ß‡∏ó‡∏≤‡∏á NFPA 13 ‡πÅ‡∏•‡∏∞ NFPA 20 ‡∏ã‡∏∂‡πà‡∏á‡∏°‡∏±‡∏Å‡πÉ‡∏ä‡πâ‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏Å‡πÅ‡∏ö‡∏ö‡πÄ‡∏ö‡∏∑‡πâ‡∏≠‡∏á‡∏ï‡πâ‡∏ô ‡∏´‡∏≤‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏Ñ‡πà‡∏≤‡∏ó‡∏µ‡πà‡πÅ‡∏°‡πà‡∏ô‡∏¢‡∏≥‡∏Ñ‡∏ß‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏à‡∏≤‡∏Å Hazen-Williams ‡∏´‡∏£‡∏∑‡∏≠ Darcy-Weisbach<br><br>
    üìò ‡∏≠‡πâ‡∏≤‡∏á‡∏≠‡∏¥‡∏á‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô:<br>
    - NFPA 13: Standard for the Installation of Sprinkler Systems<br>
    - NFPA 20: Standard for the Installation of Stationary Pumps<br>
    - ‡∏ß‡∏™‡∏ó. ‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô‡∏£‡∏∞‡∏ö‡∏ö‡∏î‡∏±‡∏ö‡πÄ‡∏û‡∏•‡∏¥‡∏á‡πÉ‡∏ô‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£<br>
    - ‡∏û.‡∏£.‡∏ö. ‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£ ‡∏û.‡∏®. 2522 ‡πÅ‡∏•‡∏∞‡∏â‡∏ö‡∏±‡∏ö‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°<br>
  </div>  <script>
    function calculate() {
      const density = parseFloat(document.getElementById('hazardClass').value);
      const area = parseFloat(document.getElementById('area').value);
      const overage = parseFloat(document.getElementById('overage').value);
      const coverage = parseFloat(document.getElementById('coverage').value);
      const spacingS_m = parseFloat(document.getElementById('spacingS_m').value);
      const spacingL_m = parseFloat(document.getElementById('spacingL_m').value);
      const kFactor = parseFloat(document.getElementById('sprinklerType').value);

      const spacingS = spacingS_m / 0.3048;
      const spacingL = spacingL_m / 0.3048;

      const headLoss = 10;
      const sprinklerDemand = density * area * overage;
      const hoseDemand = 250;
      const totalDemand = sprinklerDemand + hoseDemand;
      const sprinklerCount = area / coverage;
      const headFlow = density * coverage;
      const startPressurePsi = Math.pow(headFlow / kFactor, 2);
      const requiredPressurePsi = startPressurePsi + headLoss;
      const startPressureBar = startPressurePsi * 0.06895;

      const resultHTML = `
        <h3>Calculation Results:</h3>
        <p><strong>Sprinkler Demand:</strong> ${sprinklerDemand.toFixed(1)} gpm</p>
        <p><strong>Hose Demand:</strong> ${hoseDemand} gpm</p>
        <p><strong>Total Demand:</strong> ${totalDemand.toFixed(1)} gpm</p>
        <p><strong>Sprinklers to Operate:</strong> ${sprinklerCount.toFixed(1)} heads</p>
        <p><strong>End Head Flow:</strong> ${headFlow.toFixed(1)} gpm</p>
        <p><strong>Required Start Pressure:</strong> ${startPressurePsi.toFixed(1)} psi (${startPressureBar.toFixed(2)} bar)</p>
        <p><strong>Required Total Pressure (incl. Head Loss):</strong> ${requiredPressurePsi.toFixed(1)} psi</p>
        <p><strong>Spacing (S):</strong> ${spacingS.toFixed(1)} ft (${spacingS_m.toFixed(2)} m)</p>
        <p><strong>Spacing (L):</strong> ${spacingL.toFixed(1)} ft (${spacingL_m.toFixed(2)} m)</p>
      `;
      document.getElementById("results").innerHTML = resultHTML;

      drawPumpChart(totalDemand);
      suggestPumpSize(totalDemand);
    }

    function drawPumpChart(requiredFlow) {
      const ctx = document.getElementById('pumpChart').getContext('2d');
      new Chart(ctx, {
        type: 'line',
        data: {
          labels: [0, 100, 200, 300, 400, 500, 600, 700],
          datasets: [
            {
              label: 'Fire Pump (750 gpm)',
              data: [150, 145, 140, 135, 130, 120, 110, 100],
              borderColor: 'red',
              fill: false
            },
            {
              label: 'Jockey Pump (50 gpm)',
              data: [110, 105, 100, 95, 90, 85, 80, 75],
              borderColor: 'blue',
              fill: false
            },
            {
              label: 'Required System Pressure',
              data: Array(8).fill(10),
              borderDash: [5, 5],
              borderColor: 'green',
              fill: false
            }
          ]
        },
        options: {
          responsive: true,
          plugins: {
            title: {
              display: true,
              text: 'Fire Pump Performance Curve'
            }
          },
          scales: {
            x: {
              title: {
                display: true,
                text: 'Flow Rate (gpm)'
              }
            },
            y: {
              title: {
                display: true,
                text: 'Pressure (psi)'
              }
            }
          }
        }
      });
    }

    function suggestPumpSize(flow) {
      let size = 'N/A';
      if (flow <= 500) size = '500 gpm Fire Pump';
      else if (flow <= 750) size = '750 gpm Fire Pump';
      else if (flow <= 1000) size = '1000 gpm Fire Pump';
      else size = '‚â• 1250 gpm Fire Pump (Consult Engineer)';
      document.getElementById('pumpSuggestion').innerText = `üî• Recommended Pump Size: ${size}`;
    }

    function exportPDF() {
      const { jsPDF } = window.jspdf;
      const doc = new jsPDF();
      const content = document.getElementById("results").innerText;
      doc.text(content, 10, 10);
      doc.save("fire_protection_calculation.pdf");
    }
  </script></body>
</html>
